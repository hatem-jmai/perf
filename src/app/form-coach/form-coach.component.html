<app-header></app-header>

<form [formGroup]="registerForm"   (ngSubmit)="registerForm" novalidate></form>
<div class="example-container">


  <mat-form-field>
    <input matInput placeholder="first Name" [formControl]="name" [(ngModel)]="user.nom">
  </mat-form-field>
  <mat-error class="alert alert-danger" *ngIf="name.hasError('required')">
    FirstName is required
  </mat-error>

  <mat-form-field>  
    <input matInput placeholder="Last Name" [formControl]="lastname" [(ngModel)]="user.prenom">
  </mat-form-field>
  <mat-error class="alert alert-danger" *ngIf="lastname.hasError('required')">
    lastName is required
  </mat-error>
  
  <mat-form-field>
    <input matInput placeholder="User name" [formControl]="login" [(ngModel)]="user.username">
  </mat-form-field>
  <mat-error class="alert alert-danger" *ngIf="login.hasError('required')">
   UserName is required
  </mat-error>
  
  <mat-form-field>
    <mat-select placeholder="Gendre" [formControl]="gender" [(ngModel)]="user.genre">
      <mat-option *ngFor="let genre of gendre" [value]="genre">
        {{genre.viewValue}}
      </mat-option>
    </mat-select>
  </mat-form-field>
  <mat-error class="alert alert-danger" *ngIf="gender.hasError('required')">
    Gendre is required
   </mat-error>

  <mat-form-field>
    <input matInput [matDatepicker]="picker" placeholder="Choose a date" [(ngModel)]="user.date_naiss">
    <mat-datepicker-toggle matSuffix [for]="picker"> </mat-datepicker-toggle>
    <mat-datepicker #picker></mat-datepicker>
  </mat-form-field>

  <mat-form-field>
    <input matInput placeholder="Cin" [formControl]="cin" required 
    type="number" class="example-left-align" [(ngModel)]="user.cin">
  </mat-form-field>
  
  <mat-error class="alert alert-danger" *ngIf="cin.hasError('required')">
    cin is required
   </mat-error>
  


  <mat-form-field>
    <mat-select placeholder="Type" [(ngModel)]="user.type">
      <mat-option *ngFor="let type of types" [value]="type.viewValue">
        {{type.viewValue}}
      </mat-option>
    </mat-select>
  </mat-form-field>




  <mat-form-field>
    <input matInput placeholder="Enter your email" 
    [formControl]="email" required [(ngModel)]="user.adresse_mail"> 
</mat-form-field>
<mat-error class="alert alert-danger"
   *ngIf="email.hasError('email') && !email.hasError('required')">
    Please enter a valid email address
  </mat-error>
  <mat-error class="alert alert-danger" *ngIf="email.hasError('required')">
    Email is required
  </mat-error> 




  <mat-form-field>
    <input matInput placeholder="Enter your password" type="password" [formControl]="password" required
     [type]="hide ? 'password' : 'text'" [(ngModel)]="user.password">
    <button mat-icon-button matSuffix (click)="hide = !hide" [attr.aria-label]="'Hide password'" 
    [attr.aria-pressed]="hide">
    <mat-icon>{{hide ? 'visibility_off' : 'visibility'}}</mat-icon>
    </button>
  </mat-form-field>
  <mat-error class="alert alert-danger" *ngIf="password.hasError('required')">
    Password is required</mat-error>
  <mat-error class="alert alert-danger" *ngIf="password.hasError('minlength')">
    Password must have at least {{minPw}} characters</mat-error>




  <mat-form-field>
    <input matInput 
    placeholder="Phone Number" [formControl]="PhoneNumber" type="number" class="example-left-align"
     name="tel" [(ngModel)]="user.tel" ng-minlength = "8"
    ng-maxlength = "8">
  </mat-form-field>
  <mat-error class="alert alert-danger" *ngIf="email.hasError('required')">
    Phone Number is required
  </mat-error> 


  <mat-form-field>
    <mat-select placeholder="Gouvernorat" [(ngModel)]="user.gouernorat"> 
      <mat-option *ngFor="let gouvernerat of gouvernerats" [value]="gouvernerat.viewValue">
      {{gouvernerat.viewValue}}
    </mat-option>
    </mat-select>
  
  </mat-form-field>

  <mat-form-field>
    <mat-select placeholder="Ville" [(ngModel)]="user.ville" >
      <mat-option *ngFor="let Ville of villes" [value]="Ville.viewValue">
        {{Ville.viewValue}}
      </mat-option>
    </mat-select>
 
  </mat-form-field>

 
  
    <input type="file" placeholder="certificat" [(ngModel)]="user.certificat">
  


  <button mat-raised-button class="btn btn-outline-success" 
  type="submit"  (click)="add()">SIGN UP</button>
</div>
